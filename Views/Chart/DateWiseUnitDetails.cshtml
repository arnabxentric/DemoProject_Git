
@model XenERP.Models.ModelView.FeedStockModelView
@{
    Layout = "~/Views/Shared/_LayoutReport.cshtml";
}
<script src="../../Chart/highcharts.js" type="text/javascript"></script>
<script src="../../Chart/exporting.js" type="text/javascript"></script>
<link href="../../Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="../../Reports/css/datetimepicker/datepicker.css" />
<script src="../../Reports/Scripts/custom.js" type="text/javascript"></script>
<script src="../../Reports/js/plugins/datetimepicker/bootstrap-datepicker.js" type="text/javascript"></script>
<script src="../../Reports/js/jquery-ui-1.10.3.js" type="text/javascript"></script>
<script src="../../Reports/Scripts/jQuery.print.js" type="text/javascript"></script>


<script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1',
                                                                 'packages':['corechart']}]}">
</script>


<script type="text/javascript">
    jQuery(document).ready(function ($) {

                var fd = $('#FromDate').val();
                var td = $('#ToDate').val();



    });


</script>
<!-- Ionicons -->
@*<link href="../../Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />*@
<link rel="stylesheet" type="text/css" href="../../Reports/css/datetimepicker/datepicker.css" />
<script src="../../Reports/Scripts/custom.js" type="text/javascript"></script>
@*<script src="../../Reports/Scripts/custom.js" type="text/javascript"></script>*@
<script src="../../Reports/js/plugins/datetimepicker/bootstrap-datepicker.js" type="text/javascript"></script>
@*<script src="../../Reports/js/jquery-ui-1.10.3.js" type="text/javascript"></script>*@
<style type="text/css">
    .btn-facebook {
        background-color: #3b5998;
        border-color: rgba(0, 0, 0, 0.2);
        color: #ffffff;
        float: right;
    }

    .ui-autocomplete-loading {
        background: white url("../../Images/ajax-loader(1).gif") right center no-repeat;
    }

    .ErrorControl {
        background: none repeat scroll 0 0 #fbe3e4;
        border: 1px solid Red;
        padding: 4px;
        width: 96%;
    }

    .pad {
        width: 100% !important;
    }
</style>
<script type="text/javascript">

    $(document).ready(function () {

         var Culture="@Session["DateCulture"]";

        $("#dp3").datepicker({ autoclose: true, todayHighlight: true,language:Culture });
        $("#dp4").datepicker({ autoclose: true, todayHighlight: true,language:Culture});

        $("#loader").hide();
        $("#graph").hide();

        $('#btnsubmit').click(function () {

        $("#graph").show();

            var fromdate = $("#FromDate").val();
            var todate = $("#ToDate").val();
            if (fromdate != "" && todate != "")
            {

             $("#btnshow").hide();
             $("#loader").show();

             $("#loading").fadeIn();
             var opts = {
                 lines: 12, // The number of lines to draw
                 length: 7, // The length of each line
                 width: 4, // The line thickness
                 radius: 10, // The radius of the inner circle
                 color: '#000', // #rgb or #rrggbb
                 speed: 2.0, // Rounds per second
                 trail: 60, // Afterglow percentage
                 shadow: false, // Whether to render a shadow
                 hwaccel: false // Whether to use hardware acceleration
             };
             var target = document.getElementById('loading');
             var spinner = new Spinner(opts).spin(target);

             $.ajax({
                 type: 'post',
                 url: '/Chart/DateWiseUnitDetailsJson',
                 dataType: "json",
                 data: {
                     From: fromdate, To: todate
                 },
                 success: function (json) {
                     $("#loading").fadeOut();
                     $("#btnshow").show();
                     $("#loader").hide();
                     var processed_json = new Array();
                     var SoldChicks_json = new Array();
                     var AvgSoldChicksAmt_json = new Array();
                     var MortalityPercent_json = new Array();

                     $.map(json, function (obj, i) {
                         processed_json.push([obj.BranchName, parseInt(obj.TotalSalesAmt), ]);
                     });

                     $.map(json, function (obj, i) {
                         SoldChicks_json.push([obj.BranchName, parseInt(obj.BirdsSold), ]);
                     });

                     $.map(json, function (obj, i) {
                         AvgSoldChicksAmt_json.push([obj.BranchName, parseInt(obj.AvgSalesAmt), ]);
                     });

                     $.map(json, function (obj, i) {
                         MortalityPercent_json.push([obj.BranchName, parseInt(obj.MortalityPercent), ]);
                     });

                     $('#container').highcharts({
                         chart: {
                             type: 'column',
                             options3d: {
                                 enabled: true,
                                 alpha: 10,
                                 beta: 25,
                                 depth: 70
                             }
                         },
                         title: {
                             text: 'Sales Amount Chart'
                         },

                         plotOptions: {
                             column: {
                                 depth: 50
                             }
                         },

                         xAxis: {
                             type: 'category',
                             labels: {
                                 rotation: -45,
                                 style: {
                                     fontSize: '13px',
                                     fontFamily: 'Verdana, sans-serif',
                                     color: '#D2B48C'
                                 }
                             },

                         },
                         yAxis: {
                             // min: 0,
                             title: {
                                 text: 'Number Of Cases'
                             }
                         },
                         legend: {
                             enabled: false
                         },

                         tooltip: {
                             pointFormat: 'Count : <b>{point.y} </b>'

                         },
                         series: [{
                             name: 'F2F Meeting',
                             colorByPoint: true,
                             data: processed_json,
                             dataLabels: {
                                 enabled: false,
                                 rotation: -90,
                                 color: '#FFFFFF',
                                 align: 'right',
                                 //format: '<b>{point.y}</b>', // one decimal
                                 // y: 10, // 10 pixels down from the top
                                 style: {
                                     fontSize: '13px',
                                     fontFamily: 'Verdana, sans-serif'
                                 }
                             }
                         }]
                     });


                     $('#soldchicksdiv').highcharts({
                         chart: {
                             type: 'column',
                             options3d: {
                                 enabled: true,
                                 alpha: 10,
                                 beta: 25,
                                 depth: 70
                             }
                         },
                         title: {
                             text: 'No Of Birds Sold Chart'
                         },

                         plotOptions: {
                             column: {
                                 depth: 50
                             }
                         },

                         xAxis: {
                             type: 'category',
                             labels: {
                                 rotation: -45,
                                 style: {
                                     fontSize: '13px',
                                     fontFamily: 'Verdana, sans-serif',
                                     color: '#D2B48C'
                                 }
                             },

                         },
                         yAxis: {
                             // min: 0,
                             title: {
                                 text: 'Number Of Cases'
                             }
                         },
                         legend: {
                             enabled: false
                         },

                         tooltip: {
                             pointFormat: 'Count : <b>{point.y} </b>'

                         },
                         series: [{
                             name: 'F2F Meeting',
                             colorByPoint: true,
                             data: SoldChicks_json,
                             dataLabels: {
                                 enabled: false,
                                 rotation: -90,
                                 color: '#FFFFFF',
                                 align: 'right',
                                 //format: '<b>{point.y}</b>', // one decimal
                                 // y: 10, // 10 pixels down from the top
                                 style: {
                                     fontSize: '13px',
                                     fontFamily: 'Verdana, sans-serif'
                                 }
                             }
                         }]
                     });


                     $('#avgchicksdiv').highcharts({
                         chart: {
                             type: 'column',
                             options3d: {
                                 enabled: true,
                                 alpha: 10,
                                 beta: 25,
                                 depth: 70
                             }
                         },
                         title: {
                             text: 'Average Chicks Sale Rate'
                         },

                         plotOptions: {
                             column: {
                                 depth: 50
                             }
                         },

                         xAxis: {
                             type: 'category',
                             labels: {
                                 rotation: -45,
                                 style: {
                                     fontSize: '13px',
                                     fontFamily: 'Verdana, sans-serif',
                                     color: '#D2B48C'
                                 }
                             },

                         },
                         yAxis: {
                             // min: 0,
                             title: {
                                 text: 'Number Of Cases'
                             }
                         },
                         legend: {
                             enabled: false
                         },

                         tooltip: {
                             pointFormat: 'Count : <b>{point.y} </b>'

                         },
                         series: [{
                             name: 'F2F Meeting',
                             colorByPoint: true,
                             data: AvgSoldChicksAmt_json,
                             dataLabels: {
                                 enabled: false,
                                 rotation: -90,
                                 color: '#FFFFFF',
                                 align: 'right',
                                 //format: '<b>{point.y}</b>', // one decimal
                                 // y: 10, // 10 pixels down from the top
                                 style: {
                                     fontSize: '13px',
                                     fontFamily: 'Verdana, sans-serif'
                                 }
                             }
                         }]
                     });



                     $('#mortalitypercentagediv').highcharts({
                         chart: {
                             type: 'column',
                             options3d: {
                                 enabled: true,
                                 alpha: 10,
                                 beta: 25,
                                 depth: 70
                             }
                         },
                         title: {
                             text: 'Chicks Mortality Percentage'
                         },

                         plotOptions: {
                             column: {
                                 depth: 50
                             }
                         },

                         xAxis: {
                             type: 'category',
                             labels: {
                                 rotation: -45,
                                 style: {
                                     fontSize: '13px',
                                     fontFamily: 'Verdana, sans-serif',
                                     color: '#D2B48C'
                                 }
                             },

                         },
                         yAxis: {
                             // min: 0,
                             title: {
                                 text: 'Number Of Cases'
                             }
                         },
                         legend: {
                             enabled: false
                         },

                         tooltip: {
                             pointFormat: 'Count : <b>{point.y} </b>'

                         },
                         series: [{
                             name: 'F2F Meeting',
                             colorByPoint: true,
                             data: MortalityPercent_json,
                             dataLabels: {
                                 enabled: false,
                                 rotation: -90,
                                 color: '#FFFFFF',
                                 align: 'right',
                                 //format: '<b>{point.y}</b>', // one decimal
                                 // y: 10, // 10 pixels down from the top
                                 style: {
                                     fontSize: '13px',
                                     fontFamily: 'Verdana, sans-serif'
                                 }
                             }
                         }]
                     });













                 }
             });



            }

            else
            {

            $("#btnshow").hide();
            $("#loader").show();
            $("#loading").fadeIn();
            var opts = {
                lines: 12, // The number of lines to draw
                length: 7, // The length of each line
                width: 4, // The line thickness
                radius: 10, // The radius of the inner circle
                color: '#000', // #rgb or #rrggbb
                speed: 2.0, // Rounds per second
                trail: 60, // Afterglow percentage
                shadow: false, // Whether to render a shadow
                hwaccel: false // Whether to use hardware acceleration
            };
            var target = document.getElementById('loading');
            var spinner = new Spinner(opts).spin(target);



            $.ajax({
                type: 'post',
                url: '/Chart/DateWiseUnitDetailsJson',
                dataType: "json",
                data: {
                    From: fromdate, To: todate
                },
                success: function (json) {
                    $("#loading").fadeOut();
                    $("#btnshow").show();
                    $("#loader").hide();
                    var processed_json = new Array();
                    var SoldChicks_json = new Array();
                    var AvgSoldChicksAmt_json = new Array();
                    var MortalityPercent_json = new Array();

                    $.map(json, function (obj, i) {
                        processed_json.push([obj.BranchName, parseInt(obj.TotalSalesAmt), ]);
                    });

                    $.map(json, function (obj, i) {
                        SoldChicks_json.push([obj.BranchName, parseInt(obj.BirdsSold), ]);
                    });

                    $.map(json, function (obj, i) {
                        AvgSoldChicksAmt_json.push([obj.BranchName, parseInt(obj.AvgSalesAmt), ]);
                    });

                    $.map(json, function (obj, i) {
                        MortalityPercent_json.push([obj.BranchName, parseInt(obj.MortalityPercent), ]);
                    });

                    $('#container').highcharts({
                        chart: {
                            type: 'column',
                            options3d: {
                                enabled: true,
                                alpha: 10,
                                beta: 25,
                                depth: 70
                            }
                        },
                        title: {
                            text: 'Sales Amount Chart'
                        },

                        plotOptions: {
                            column: {
                                depth: 50
                            }
                        },

                        xAxis: {
                            type: 'category',
                            labels: {
                                rotation: -45,
                                style: {
                                    fontSize: '13px',
                                    fontFamily: 'Verdana, sans-serif',
                                    color: '#D2B48C'
                                }
                            },

                        },
                        yAxis: {
                            // min: 0,
                            title: {
                                text: 'Number Of Cases'
                            }
                        },
                        legend: {
                            enabled: false
                        },

                        tooltip: {
                            pointFormat: 'Count : <b>{point.y} </b>'

                        },
                        series: [{
                            name: 'F2F Meeting',
                            colorByPoint: true,
                            data: processed_json,
                            dataLabels: {
                                enabled: false,
                                rotation: -90,
                                color: '#FFFFFF',
                                align: 'right',
                                //format: '<b>{point.y}</b>', // one decimal
                                // y: 10, // 10 pixels down from the top
                                style: {
                                    fontSize: '13px',
                                    fontFamily: 'Verdana, sans-serif'
                                }
                            }
                        }]
                    });

                    $('#soldchicksdiv').highcharts({
                        chart: {
                            type: 'column',
                            options3d: {
                                enabled: true,
                                alpha: 10,
                                beta: 25,
                                depth: 70
                            }
                        },
                        title: {
                            text: 'No Of Birds Sold Chart'
                        },

                        plotOptions: {
                            column: {
                                depth: 50
                            }
                        },

                        xAxis: {
                            type: 'category',
                            labels: {
                                rotation: -45,
                                style: {
                                    fontSize: '13px',
                                    fontFamily: 'Verdana, sans-serif',
                                    color: '#D2B48C'
                                }
                            },

                        },
                        yAxis: {
                            // min: 0,
                            title: {
                                text: 'Number Of Cases'
                            }
                        },
                        legend: {
                            enabled: false
                        },

                        tooltip: {
                            pointFormat: 'Count : <b>{point.y} </b>'

                        },
                        series: [{
                            name: 'F2F Meeting',
                            colorByPoint: true,
                            data: SoldChicks_json,
                            dataLabels: {
                                enabled: false,
                                rotation: -90,
                                color: '#FFFFFF',
                                align: 'right',
                                //format: '<b>{point.y}</b>', // one decimal
                                // y: 10, // 10 pixels down from the top
                                style: {
                                    fontSize: '13px',
                                    fontFamily: 'Verdana, sans-serif'
                                }
                            }
                        }]
                    });


                    $('#avgchicksdiv').highcharts({
                        chart: {
                            type: 'column',
                            options3d: {
                                enabled: true,
                                alpha: 10,
                                beta: 25,
                                depth: 70
                            }
                        },
                        title: {
                            text: 'Average Chicks Rate Chart'
                        },

                        plotOptions: {
                            column: {
                                depth: 50
                            }
                        },

                        xAxis: {
                            type: 'category',
                            labels: {
                                rotation: -45,
                                style: {
                                    fontSize: '13px',
                                    fontFamily: 'Verdana, sans-serif',
                                    color: '#D2B48C'
                                }
                            },

                        },
                        yAxis: {
                            // min: 0,
                            title: {
                                text: 'Number Of Cases'
                            }
                        },
                        legend: {
                            enabled: false
                        },

                        tooltip: {
                            pointFormat: 'Count : <b>{point.y} </b>'

                        },
                        series: [{
                            name: 'F2F Meeting',
                            colorByPoint: true,
                            data: AvgSoldChicksAmt_json,
                            dataLabels: {
                                enabled: false,
                                rotation: -90,
                                color: '#FFFFFF',
                                align: 'right',
                                //format: '<b>{point.y}</b>', // one decimal
                                // y: 10, // 10 pixels down from the top
                                style: {
                                    fontSize: '13px',
                                    fontFamily: 'Verdana, sans-serif'
                                }
                            }
                        }]
                    });



                    $('#mortalitypercentagediv').highcharts({
                        chart: {
                            type: 'column',
                            options3d: {
                                enabled: true,
                                alpha: 10,
                                beta: 25,
                                depth: 70
                            }
                        },
                        title: {
                            text: 'Mortality Percentage Chart'
                        },

                        plotOptions: {
                            column: {
                                depth: 50
                            }
                        },

                        xAxis: {
                            type: 'category',
                            labels: {
                                rotation: -45,
                                style: {
                                    fontSize: '13px',
                                    fontFamily: 'Verdana, sans-serif',
                                    color: '#D2B48C'
                                }
                            },

                        },
                        yAxis: {
                            // min: 0,
                            title: {
                                text: 'Number Of Cases'
                            }
                        },
                        legend: {
                            enabled: false
                        },

                        tooltip: {
                            pointFormat: 'Count : <b>{point.y} </b>'

                        },
                        series: [{
                            name: 'F2F Meeting',
                            colorByPoint: true,
                            data: MortalityPercent_json,
                            dataLabels: {
                                enabled: false,
                                rotation: -90,
                                color: '#FFFFFF',
                                align: 'right',
                                //format: '<b>{point.y}</b>', // one decimal
                                // y: 10, // 10 pixels down from the top
                                style: {
                                    fontSize: '13px',
                                    fontFamily: 'Verdana, sans-serif'
                                }
                            }
                        }]
                    });

                }
            });

         

           }
        });
    });


</script>


@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <aside class="right-side">

        <section class="content-header">
            <h1>
               Unit Chart <small></small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                <li><a href="#">Forms</a></li>
                <li class="active">General Elements</li>
            </ol>
        </section>



        @if (ViewBag.Message != null)
        {
            <div class="alert alert-success alert-dismissable">
                <i class="fa fa-check"></i>
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                @ViewBag.Message
            </div>
        }
        @if (ViewBag.Error != null)
        {
            <div class="alert alert-danger alert-dismissable">
                <i class="fa fa-ban"></i>
                <button class="close" aria-hidden="true" data-dismiss="alert" type="button">×</button>
                <b>Error!</b>
                @ViewBag.Error
            </div>
        }

        <div id="loading">
            <div id="loadingcontent">
                <p id="loadingspinner">
                    Loading...
                </p>
            </div>
        </div>


        <!-- Main content -->
        <section class="content">
            <div class="row">

                <div class="nav-tabs-custom">
                    <ul class="nav nav-tabs">

                        <li class="pull-right"></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab_1">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="box box-primary">
                                        <div class="box-body">

                                            <table>
                                                <tr>
                                                    <td>
                                                        <span class="r-txt">&nbsp; &nbsp; &nbsp; &nbsp;From Date:</span>
                                                    </td>
                                                    <td>
                                                        <div class="input-group date" data-date-format="@Session["DateFormatLower"]" id="dp3">

                                                            <input type="text" readonly="readonly" class="form-control" id="FromDate" />
                                                            <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <span class="r-txt"> &nbsp; &nbsp; &nbsp; &nbsp;To Date:</span>
                                                    </td>
                                                    <td>
                                                        <div class="input-group date" data-date-format="@Session["DateFormatLower"]" id="dp4">  <input readonly="readonly" type="text" class="form-control" id="ToDate" /> <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span> </div>
                                                    </td>
                                                    <td>
                                                        <div>


                                                            <div id="loader"><img src="../../Images/ajax-loader(1).gif" /> </div>
                                                            <div id="btnshow">  &nbsp; &nbsp; &nbsp; &nbsp;<input type="button" id="btnsubmit" class="btn btn-primary" value="Show" /></div>

                                                        </div>
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td></td>
                                                </tr>


                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="tab-pane" id="tab_4">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="box box-primary">
                                        <div class="box-header">

                                        </div>
                                        <div class="box-body">

                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </section>


    </aside>
}

<aside class="right-side">
    <div class="input-group input-group-lg">

        <!-- /btn-group -->

    </div>
</aside>

<!-- /.modal -->
<div id="container" style="min-width: 310px; max-width: 800px; height: 500px; margin: 0 auto"></div>
<div id="soldchicksdiv" style="min-width: 310px; max-width: 800px; height: 500px; margin: 0 auto"></div>
<div id="avgchicksdiv" style="min-width: 310px; max-width: 800px; height: 500px; margin: 0 auto"></div>
<div id="mortalitypercentagediv" style="min-width: 310px; max-width: 800px; height: 500px; margin: 0 auto"></div>
@*<div id="FarmDetails">
</div>*@

<br />

