@model IEnumerable<XenERP.Models.FarmMaster>

@*<script src="~/Scripts/jquery-1.10.2.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>*@


<script type="text/javascript" src="~/Scripts/JqueryValidation.js"></script>

<script src="../../js/plugins/datetimepicker/bootstrap-datepicker.js" type="text/javascript"></script>
<link href="~/css/datetimepicker/datepicker.css" rel="stylesheet" />

<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyC3Y1L6bV25qY27RUZuKQwpk1JG3yLzeac&sensor=false&libraries=geometry"></script>



@*<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.11&sensor=false" type="text/javascript"></script>*@

<script type="text/javascript">
  
    $(document).ready(function () {     




        $("#btnSearch").click(function () {
            var locations = [];


     
            var bId = $("#UnitId").val();

            $.get('/App/FarmerLatLangLocation', { brId: bId }, function (data) {
             

             
                $.each(data, function () {
                    var mr = [this.FarmerName,this.FarmerLatitude,this.FarmerLongitude]
                  //  alert(mr);
                    locations.push(mr);
                    
                });

            

                var map = new google.maps.Map(document.getElementById('googleMap'), {
                    zoom: 10,
                    center: new google.maps.LatLng(locations[0][1], locations[0][2]),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                });

                var infowindow = new google.maps.InfoWindow();

                var marker, i;

                for (i = 0; i < locations.length; i++) {
                    marker = new google.maps.Marker({
                        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                        map: map
                    });

                    google.maps.event.addListener(marker, 'click', (function (marker, i) {
                        return function () {
                            infowindow.setContent(locations[i][0]);
                            infowindow.open(map, marker);
                        }
                    })(marker, i));
                }


            });

        });
    });
</script>


<aside class="right-side">
    <div class="col-md-12">

        <div class="col-md-6">
            <div class="box box-primary">
                <div class="box-header">  </div>
                <div class="box-body">
                    <div class="form-group">
                        <label class="black_txt_010"> Unit Code :<span style="color:Red;">*</span> </label>
                        @Html.DropDownList("UnitId", new SelectList(ViewBag.BranchList, "Value", "Text"), "------None-----", new { @class = "form-control", @placeholder = "Enter Farm Unit Name", @maxlength = "100" })

                    </div>

                    <input name="" type="submit" id="btnSearch" value="Search" class="btn btn-primary">

                </div>
            </div>
        </div>

     
    </div>

    <div class="col-md-12">
        <div id="googleMap" style="width:1000px;height:600px;"></div>

    </div>

   
</aside>
