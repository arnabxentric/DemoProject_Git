@model XenERP.Models.TrialBalanceDrillDownModelView

@{

    var SlNo = 0;
    decimal? tdebit = 0;
    decimal? tcredit = 0;
    decimal? topeningdr = 0;
    decimal? topeningcr = 0;
    decimal? tclosingdr = 0;
    decimal? tclosingcr = 0;
    decimal? total = 0;
    //   Layout = "~/Views/Shared/_LayoutReport.cshtml";
  //  Layout = "~/Views/Shared/_LayoutReport.cshtml";
}
<!--for graph   -->
<!--for graph   -->
<style type="text/css">
        table.dataTable thead .sorting_desc {
            background: url("/Images/sort_desc.png") no-repeat scroll right center #53A9BC;
        }

        table.dataTable thead .sorting_asc {
            background: url("/Images/sort_asc.png") no-repeat scroll right center #53A9BC;
        }
    </style>
    <style type="text/css">
        .ui-autocomplete-loading {
            background: white url("../../Images/ajax-loader(1).gif") right center no-repeat;
        }

        .marginleft10 {
            margin-left: 10px !important;
        }

        .screenlet-title-bar {
            color: #0099cc;
            font-size: 14pt;
            font-weight: bold;
            height: 24px;
        }

        .ErrorControl {
            background: none repeat scroll;
            border: 1px solid Red;
            padding: 4px;
            width: 96%;
        }

     thead, tfoot {
      display: table-row-group;
    }
    tr { page-break-inside: avoid; }
    media print {
       thead {display: table-header-group;}
    }
    table {
            font-size:small;
        }
    </style>


<link href="~/Content/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css" rel="stylesheet" />

<script src="~/Content/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="~/Content/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<script src="~/Content/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="~/Content/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
<script src="~/Content/vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
<script src="~/Content/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="~/Content/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="~/Content/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
<script src="~/Content/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
<script src="~/Content/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="~/Content/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
<script src="~/Content/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
<script src="~/Content/vendors/jszip/dist/jszip.min.js"></script>
<script src="~/Content/vendors/pdfmake/build/pdfmake.min.js"></script>
<script src="~/Content/vendors/pdfmake/build/vfs_fonts.js"></script>
<script src="~/Content/vendors/datatables.net-buttons/js/buttons.colVis.min.js"></script>


<script src="../../Reports/js/jquery-ui-1.10.3.js" type="text/javascript"></script>
<script src="../../Reports/Scripts/jQuery.print.js" type="text/javascript"></script>

<style type="text/css">
    body {
        font-family: verdana, arial, sans-serif;
        font-size: 10px;
    }

    .invoice th,
    td {
        padding: 3px 2px 3px 2px;
        text-align: center;
    }

    .invoice th {
        border-bottom: 2px solid #333333;
    }

    .invoice td {
        border-bottom: 1px solid #999999;
    }

    .invoice table {
        overflow: visible !important;
    }

    .invoice thead {
        display: table-header-group;
    }

    .invoice tfoot {
        display: table-row-group;
    }

    .invoice tr {
        page-break-inside: avoid;
    }
</style>
@*<link href="../../css/Invoice.css" rel="stylesheet" type="text/css" />*@

<script>
        $(document).ready(function () {
            //$("#print1").hide();
            $('#btnprnt').click(function () {
                var id = $("#Id").val();
                var divElements = document.getElementById("print1").innerHTML;


                document.body.innerHTML =
                  "<html><head><title>Growing Charge</title></head><body>" +
                  divElements + "</body>";


                //Print Page
                window.print();
                window.location.href = "/FinancialReport/AdminTBDrillDown";
            });
        });
</script>

<script>

    $(document).ready(function () {

        var handleDataTableButtons = function () {
            if ($("#datatable-buttons").length) {

                $("#datatable-buttons").DataTable({
                    bSort: true,
                    ordering: false,
                    dom: "Bfrtip",
                    "iDisplayLength": 100,
                    columnDefs: [{
                        orderable: false,
                        targets: "no-sort"
                    }],
                    buttons: [

                      {
                          extend: "excelHtml5",
                          className: "btn-sm",
                          title: "UnitProductReceive" + "(" + "@ViewBag.from" + " To " + "@ViewBag.to" + ")",
                          //exportOptions: {
                          //    columns: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
                          //},
                          customize: function (xlsx) {
                              var sheet = xlsx.xl.worksheets['sheet1.xml'];
                              $('row c[r^="C"]', sheet).attr('s', '2');
                          }
                      },
                    ],
                    responsive: true
                });
            }
        };



        TableManageButtons = function () {
            "use strict";
            return {
                init: function () {
                    handleDataTableButtons();
                }
            };
        }();

        $('#datatable').dataTable();

        $('#datatable-keytable').DataTable({
            keys: true
        });

        $('#datatable-responsive').DataTable();

        $('#datatable-scroller').DataTable({
            ajax: "js/datatables/json/scroller-demo.json",
            deferRender: true,
            scrollY: 380,
            scrollCollapse: true,
            scroller: true
        });

        $('#datatable-fixed-header').DataTable({
            fixedHeader: true
        });

        var $datatable = $('#datatable-checkbox');

        $datatable.dataTable({
            'order': [[1, 'asc']],
            'columnDefs': [
              { orderable: false, targets: [0] }
            ]
        });
        $datatable.on('draw.dt', function () {
            $('input').iCheck({
                checkboxClass: 'icheckbox_flat-green'
            });
        });

        TableManageButtons.init();

        $datatable.dataTable({
            initComplete: function () {
                this.api().columns().every(function () {
                    var column = this;
                    var select = $('<select><option value=""></option></select>')
                        .appendTo($(column.footer()).empty())
                        .on('change', function () {
                            var val = $.fn.dataTable.util.escapeRegex(
                                $(this).val()
                            );

                            column
                                .search(val ? '^' + val + '$' : '', true, false)
                                .draw();
                        });

                    column.data().unique().sort().each(function (d, j) {
                        select.append('<option value="' + d + '">' + d + '</option>')
                    });
                });
            }
        });

    });
</script>
@*<aside>*@
@*<div class="box box-primary" width="90%">

    <div class="box-body table-responsive divContent" width="90%">*@
<div style="text-align:right">
    <input name="" type="button" id="btnprnt" value="PRINT" class="btn btn-danger" />
</div>
<div id="print1">
    <div align="center">
        <span style="font-size:x-large;font-weight:bolder">HI-BREED AVIAN RESEARCH & INTEGRATOR</span><br />
        <span style="font-size:large;font-weight:bolder"> 22, R.N. Mukherjee Road, 5th Floor, Kolkata-700 001</span><br />
        <span style="font-size:large;font-weight:bolder">Trial Balance  @ViewBag.DateRange</span>
    </div>

    <table id="" class="table-bordered table-striped invoice">
        <thead>
            @*<tr>
                    <th colspan="8" style="text-align:center">

                        <span style="font-size:x-large;font-weight:bolder">HI-BREED AVIAN RESEARCH & INTEGRATOR</span><br />
                        <span style="font-size:large;font-weight:bolder"> 22, R.N. Mukherjee Road, 5th Floor, Kolkata-700 001</span><br />
                        <span style="font-size:large;font-weight:bolder">Trial Balance For The Year End @ViewBag.FinancialYear</span>
                    </th>
                </tr>*@

            <tr>
                <th style="padding:8px;" align="center" width="5%">SlNo.</th>

                <th style="padding:8px;" width="20%">
                    Group Name
                </th>

                <th style="padding:8px;" width="10%">
                    Dr Opening
                </th>
                <th style="padding:8px;" width="10%">
                    Cr Opening
                </th>
                <th style="padding:8px;" width="10%">
                    @*@Html.DisplayNameFor(model => model.Debit)*@
                    Debit
                </th>
                <th style="padding:8px;" width="10%">
                    @*@Html.DisplayNameFor(model => model.Credit)*@
                    Credit
                </th>
                <th style="padding:8px;" width="10%">
                    Dr Closing
                </th>
                <th style="padding:8px;" width="10%">
                    Cr Closing
                </th>


            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.TrialGroups.Where(d => d.OpeningDebit != 0 || d.OpeningCredit != 0 || d.Debit != 0 || d.Credit != 0 || d.ClosingDebit != 0 || d.ClosingCredit != 0))
            {
                SlNo = SlNo + 1;
                topeningdr += item.OpeningDebit;
                topeningcr += item.OpeningCredit;
                tdebit += item.Debit;
                tcredit += item.Credit;
                tclosingdr += item.ClosingDebit;
                tclosingcr += item.ClosingCredit;


                <tr>
                    <td style="padding:8px;" align="center"> @SlNo</td>

                    <td style="padding:8px;">

                        @Html.DisplayFor(modelItem => item.LedgerName)

                    </td>


                    <td align="right" style="padding:8px;">
                        @Html.DisplayFor(modelItem => item.OpeningDebit)
                    </td>
                    <td align="right" style="padding:8px;">
                        @Html.DisplayFor(modelItem => item.OpeningCredit)
                    </td>


                    <td align="right" style="padding:8px;">
                        @Html.DisplayFor(modelItem => item.Debit)
                    </td>
                    <td align="right" style="padding:8px;">
                        @Html.DisplayFor(modelItem => item.Credit)
                    </td>




                    <td align="right" style="padding:8px;">
                        @Html.DisplayFor(modelItem => item.ClosingDebit)
                    </td>
                    <td align="right" style="padding:8px;">
                        @Html.DisplayFor(modelItem => item.ClosingCredit)
                    </td>



                </tr>
            if (Model.TrialLedgers.Where(d => d.GroupId == item.GroupId && d.GroupId != 104 && d.GroupId != 108 && (d.OpeningDebit != 0 || d.OpeningCredit != 0 || d.Debit != 0 || d.Credit != 0 || d.ClosingDebit != 0 || d.ClosingCredit != 0)).Count() > 0)
            {
                var SlNo1 = 0;
                    <tr>
                        <td colspan="8" style="padding:5px 5px 5px 5px;">
                            <div id="demo_@SlNo" class="detailDiv">
                                <table width="100%" border="1">
                                    <thead>
                                        <tr>
                                            <th style="text-align:center" width="5%">SlNo.</th>

                                            <th style="text-align:center" width="20%">
                                                @Html.DisplayFor(modelItem => item.LedgerName)
                                            </th>

                                            <th style="text-align:center" width="10%">
                                                Dr Opening
                                            </th>
                                            <th style="text-align:center" width="10%">
                                                Cr Opening
                                            </th>
                                            <th style="text-align:center" width="10%">
                                                @*@Html.DisplayNameFor(model => model.Debit)*@
                                                Debit
                                            </th>
                                            <th style="text-align:center" width="10%">
                                                @*@Html.DisplayNameFor(model => model.Credit)*@
                                                Credit
                                            </th>
                                            <th style="text-align:center" width="10%">
                                                Dr Closing
                                            </th>
                                            <th style="text-align:center" width="10%">
                                                Cr Closing
                                            </th>


                                        </tr>
                                    </thead>
                                    @foreach (var ledger in Model.TrialLedgers.Where(d => d.GroupId == item.GroupId && (d.OpeningDebit != 0 || d.OpeningCredit != 0 || d.Debit != 0 || d.Credit != 0 || d.ClosingDebit != 0 || d.ClosingCredit != 0)))
                                {
                                    SlNo1++;
                                        <tr>
                                            <td style="text-align:center"> @SlNo1</td>

                                            <td>
                                                @Html.DisplayFor(modelItem => ledger.LedgerName)
                                            </td>
                                            <td align="right">
                                                @Html.DisplayFor(modelItem => ledger.OpeningDebit)
                                            </td>
                                            <td align="right">
                                                @Html.DisplayFor(modelItem => ledger.OpeningCredit)
                                            </td>
                                            <td align="right">
                                                @Html.DisplayFor(modelItem => ledger.Debit)
                                            </td>
                                            <td align="right">
                                                @Html.DisplayFor(modelItem => ledger.Credit)
                                            </td>
                                            <td align="right">
                                                @Html.DisplayFor(modelItem => ledger.ClosingDebit)
                                            </td>
                                            <td align="right">
                                                @Html.DisplayFor(modelItem => ledger.ClosingCredit)
                                            </td>
                                        </tr>
                                }
                                </table>
                            </div>
                        </td>
                    </tr>
            }

        }

            <tr>
                <td colspan="2">  Total</td>
                <td align="right">
                    @topeningdr
                </td>
                <td align="right">
                    @topeningcr
                </td>
                <td align="right">
                    @tdebit
                </td>
                <td align="right">
                    @tcredit
                </td>
                <td align="right">
                    @tclosingdr
                </td>
                <td align="right">
                    @tclosingcr
                </td>


            </tr>

        </tbody>
    </table>
</div>
@*</div>
    </div>*@

@*</aside>*@
