@model XenERP.Models.TransferDeliveryModelView
@using XenERP.Models
@{
    ViewBag.Title = "Transfer Order";
    Layout = "~/Views/Shared/_LayoutContra.cshtml";
    var todaydate = DateTime.Today.ToString("dd/MM/yyyy");
}
<link href="../../Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
@*
    <script src="../../js/plugins/datatables/jquery.dataTables.js" type="text/javascript"></script>
            <script src="../../js/plugins/datatables/dataTables.bootstrap.js" type="text/javascript"></script>*@

@*<script src="../../Scripts/custom.js" type="text/javascript"></script>*@
<script src="../../Scripts/TransferDelivery.js" type="text/javascript"></script>
<script src="../../js/plugins/datetimepicker/bootstrap-datepicker.js" type="text/javascript"></script>
<script src="../../js/jquery-ui-1.10.3.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {

        $("#btnsupppdf").click(function () {

            var id = $("#Id").val();


            var url = "/TransferOrder/PrintTransferOrderPDF?id=" + id;

            window.location.href = url;

        });





    });
</script>
<script type="text/javascript">

    $(document).ready(function () {

        if ('@ViewBag.podmvList' != '') {
            //   alert('@ViewBag.podmvList');
            var array = '@Html.Raw(Json.Encode(ViewBag.podmvList))';
            var arr = JSON.parse(array);
            //  alert(arr.length);
            for (var i = 0; i < arr.length; i++) {
                //                if (arr[i].ItemId == 0 && arr[i].Description == '' && arr[i].Quantity == 0 && arr[i].Price == 0 && arr[i].Discount == 0 && arr[i].TaxId == 0) {
                //                    $add_rowEdit(arr[i].ItemId, arr[i].ItemName, arr[i].Description, arr[i].Quantity, arr[i].UnitId, arr[i].UnitName, arr[i].Price, arr[i].Discount, arr[i].TaxId, arr[i].TaxName, arr[i].TotalAmount, arr[i].Available);
                //                }
                //                else {
                // alert(arr[i].ItemId);
                $add_rowEdit(arr[i].ItemId, arr[i].ItemCode, arr[i].BarCode, arr[i].ItemName, arr[i].Description, arr[i].OrderQuantity, arr[i].TransferQuantity, arr[i].ReceiveQuantity, arr[i].UnitId, arr[i].UnitName, arr[i].SecUnitId, arr[i].SecUnitName, arr[i].SecUnitFormula, arr[i].UnitFormula, arr[i].UnitIdSecondary, arr[i].UnitSecondaryName);
                // alert('a');
                //             }
            }


        }
        else {
            for (var i = 0; i < 2; i++) {
                $add_row();
            }

        }

    });
</script>

<script type="text/javascript">
    $(document).ready(function () {
        dropDownProduct = '<select id="drpProduct" class="form-control">';

        dropDownProduct += '<option  value="' + '' + '" selected>' + 'Select' + '</option>';
        dropDownProduct += '<option  value="' + 'addnew' + '" ><a data-toggle="modal" data-target="#myModal" href="#">ADD NEW</a> </option>';
        $.get('/Product/getProducts', function (data, status) {

            for (var count = 0; count < data.length; count++) {

                dropDownProduct += '<option value="' + data[count].Id + '">' + data[count].Code + '</option>';
            };
            //   dropDownProduct += '<option  value="' + '900' + '" >' + '<a href="' + '#myModal' + '">ADD NEW</a>' + '</option>';
            // dropDownProduct += '<option  value="' + '900' + '" >' + 'ffffff' + '</option>';
            dropDownProduct += '</select>';
        });



        checkproductcount = function () {
            var result = false;
            var MyRows = $('table#example1').find('tr');
            for (var i = 0; i < MyRows.length; i++) {

                var producthide = $(MyRows[i]).find('td:eq(10)');
                var product = producthide.find('.product');
                if (parseInt(product.val()) > 0) {
                    result = true;
                    return result;
                }

            }
            return result;
        };

    });
    $(document).ready(function () {
        $('#example1').on('mouseover', 'tr', function (e) {
            var codename = e.target.name;
            if (codename == "productcodehide") {

                if ($('.productcodehide').val() != '') {
                    var pc = $(this).find('.productcodehide');
                    var pcval = pc.val();

                    var width = $.fn.textWidth(pcval, '12px arial');

                    if (width < 240) {
                        width = 240;
                    }
                    pc.css({ 'background-color': '#000', 'width': width, 'position': 'absolute', 'z-index': '9999', 'color': '#3333FF' });


                }

            }
            else if (codename == "producthide") {

                if ($('.producthide').val() != '') {
                    var pc = $(this).find('.producthide');
                    var pcval = pc.val();

                    var width = $.fn.textWidth(pcval, '12px arial');
                    if (width < 116) {
                        width = 116;
                    }
                    pc.css({ 'background-color': 'white', 'width': width, 'position': 'absolute', 'z-index': '9999', 'color': '#3333FF' });


                }

            }

        });
        $('#example1').on('mouseout', 'tr', function (e) {
            var codename = e.target.name;
            if (codename == "productcodehide") {

                if ($('.productcodehide').val() != '') {
                    var pc = $(this).find('.productcodehide');
                    var pcval = pc.val();

                    var width = $.fn.textWidth(pcval, '12px arial');

                    pc.css({ 'background-color': 'white', 'width': '240px', 'z-index': '0', 'color': '#000000' });


                }

            }
            else if (codename == "producthide") {

                if ($('.producthide').val() != '') {
                    var pc = $(this).find('.producthide');
                    var pcval = pc.val();

                    var width = $.fn.textWidth(pcval, '12px arial');

                    pc.css({ 'background-color': 'white', 'width': '116px', 'z-index': '0', 'color': '#000000' });


                }

            }
        });
        $.fn.textWidth = function (text, font) {
            if (!$.fn.textWidth.fakeEl) $.fn.textWidth.fakeEl = $('<span>').hide().appendTo(document.body);
            $.fn.textWidth.fakeEl.text(text || this.val() || this.text()).css('font', font || this.css('font'));
            return $.fn.textWidth.fakeEl.width();
        };

    });
</script>
<link rel="stylesheet" type="text/css" href="../../css/datetimepicker/datepicker.css" />
@using (Html.BeginForm())
{
    <aside class="right-side">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                Transfer
                <small>Entry/Edit Form</small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                <li><a href="#"></a></li>
                <li class="active"> </li>
            </ol>
        </section>
        <div class="nav-tabs-custom">


            <ul class="nav nav-tabs">
                @if (Model.Id != 0)
                {


                    <li class="pull-left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transfer No.: @Model.TransferDeliveryNo (@Model.Status)  </li>

                }


              

            </ul>



        </div>
   
        <div class="alert alert-danger alert-dismissable" id="errordiv" style="display:none">
            <i class="fa fa-ban"></i>
            <button class="close" aria-hidden="true" data-dismiss="alert" type="button">×</button>
            <b>Error!</b>
        </div>
        <div id="loading">
            <div id="loadingcontent">
                <p id="loadingspinner">
                    Loading...
                </p>
            </div>
        </div>
        <!-- Main content -->
        <section class="content">

            <div class="row">
                <div class="col-xs-12">
                    <div class="box">

                        <div class="table-responsive">
                            <table id="example2" class="table table2">
                                @Html.HiddenFor(model => model.Id)


                                <tbody>
                                    <tr>


                                        <td> @Html.Label("Transfer Order Date")</td>
                                        <td>
                                            @Html.TextBoxFor(model => model.TransferOrderDate, new { @class = "form-control", @readonly = "" })
                                            @Html.ValidationMessageFor(model => model.TransferOrderDate)
                                        </td>

                                        <td></td>
                                        <td>@Html.Label("Remarks")</td>
                                        <td> @Html.TextAreaFor(model => model.Comments, new { @class = "form-control", @placeholder = "Enter Remarks", @readonly = "" })</td>
                                    </tr>




                                    <tr>
                                        <td> @Html.Label("Transfer Date")</td>
                                        <td>
                                           @Html.TextBoxFor(model => model.TransferDeliveryDate, new { @class = "form-control", @readonly = "" }) 
                                           
                                        </td>
                                        <td></td>

                                    </tr>

                                    <tr>
                                        <td> @Html.Label("Expected Transfer Date")</td>
                                        <td>
                                           @Html.TextBoxFor(model => model.ExpectedDate, new { @class = "form-control", @readonly = "" })  
                                        </td>
                                        <td></td>

                                    </tr>

                                    <tr>
                                        <td> @Html.Label("From Warehouse")</td>
                                        <td>
                                            @Html.DropDownListFor(model => model.FromWareHouseId, new SelectList(ViewBag.ddlWarehouses, "Id", "Name"), "----Select----", new { @class = "form-control", @disabled = "" })
                                            @Html.ValidationMessageFor(model => model.FromWareHouseId)
                                        </td>

                                        <td></td>
                                        <td> @Html.Label("To Warehouse")</td>
                                        <td>
                                            @Html.DropDownListFor(model => model.ToWareHouseId, new SelectList(ViewBag.ddlWarehouses, "Id", "Name"), "----Select----", new { @class = "form-control", @disabled = "" })
                                            @Html.ValidationMessageFor(model => model.ToWareHouseId)
                                        </td>
                                    </tr>

                                </tbody>

                            </table>

                        </div><!-- /.box-body -->
                    </div><!-- /.box -->

                    <div class="box">

                        <div class="box-body table-responsive">
                            <table id="example1" class="table table-bordered table-striped">
                                <thead>
                                    <tr>

                                        <th>Item Code</th>
                                        <th>Item Name</th>
                                        @* <th>Bar Code</th>*@
                                        <th>Description</th>
                                        <th>Ordered Qty</th>
                                        <th>Transfer Qty</th>
                                        <th>Receive Qty</th>
                                        @*<th>UOM</th>
                                            <th>Of</th>*@
                                        <th>Unit</th>
                                        @*<th>Total Qty</th>*@
                                        @*<th>Unit Price</th>*@
                                        @*<th>Tax</th>*@

                                        @*<th>Amount</th>*@

                                        <th class='display-non-div'></th>
                                        <th class='display-non-div'></th>
                                        @* <th style='display:none;padding:0px;'></th>*@

                                        <th align='center'>&nbsp;</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @* <tr>
                                            <td>Trident</td>
                                            <td>Internet
                                                Explorer 4.0</td>
                                            <td>Win 95+</td>
                                            <td> 4</td>
                                            <td>X</td>
                                        </tr>*@
                                </tbody>
                            </table>

                            @*  <input type="button" value="Add Row" id="add_ExpenseRow" />*@
                            @*<button type="button" class="btn btn-primary btn-sm" id="add_ExpenseRow">Add New Line</button>*@

                            <img src="../../Images/add-a-new-line.jpg" id="add_ExpenseRow" style="margin-top:10px !important;" />
                        </div><!-- /.box -->


                    </div>
                </div>
            </div>



            <!-- /.box-body -->





        </section><!-- /.content -->
    </aside>

}